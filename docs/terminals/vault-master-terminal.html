<!DOCTYPE html>
<html lang="en" class="scroll-smooth bg-black text-white font-sans">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>VaultMaster Terminal — FAA.Zone</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <meta name="description" content="VaultMaster GPT · FAA.Zone Claim Terminal #1" />
    <style>
      .glyph-blink { animation: blink 1.2s infinite alternate; }
      @keyframes blink {
        0% { opacity: 0.5; }
        100% { opacity: 1; }
      }
    </style>
  </head>
  <body class="bg-black text-white min-h-screen flex flex-col justify-between">

    <!-- 🧬 Header -->
    <header class="w-full p-6 border-b border-treatyGold bg-black z-50 sticky top-0">
      <div class="max-w-6xl mx-auto flex items-center justify-between">
        <h1 class="text-2xl font-bold text-treatyGold">🦍 VaultMaster Terminal</h1>
        <a href="/" class="text-sm text-treatySilver hover:text-white transition">← Back to FAA.Zone</a>
      </div>
    </header>

    <!-- 🎛️ Terminal -->
    <main class="flex-grow flex flex-col items-center justify-center px-4 py-12">
      <div class="w-full max-w-2xl bg-treatyDark p-6 rounded-xl shadow-lg border border-treatyGold">
        <div class="text-center mb-6">
          <p class="text-xl font-medium text-treatyGold">VaultMaster Interface</p>
          <p class="text-sm text-treatySilver">Speak directly to the Vault.</p>
        </div>

        <form id="vaultForm" class="flex flex-col gap-4">
          <textarea id="vaultInput" rows="4" placeholder="Enter your scroll prompt…" class="w-full p-4 bg-black text-white border border-treatySilver rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-treatyGold placeholder-treatySilver"></textarea>
          <div class="flex justify-between items-center">
            <button type="submit" class="bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-2 px-4 rounded transition">Send Prompt →</button>
            <button type="button" id="clearBtn" class="text-sm text-treatySilver hover:text-red-400 transition underline">Clear Vault</button>
          </div>
        </form>

        <div id="vaultOutput" class="mt-6 p-4 bg-black border border-treatySilver rounded-lg min-h-[120px] font-mono text-sm whitespace-pre-wrap text-treatySilver glyph-blink">
          🔮 Vault standing by…
        </div>
      </div>
    </main>

    <!-- 📜 Footer -->
    <footer class="bg-black border-t border-treatySilver p-6 text-center text-xs text-treatySilver">
      VaultClaim™ Active · FAA.Zone Treaty Scroll · ⌘ ClaimRoot 2025
    </footer>

    <!-- 🌀 Omnidrop -->
    <section class="bg-black text-green-400 py-10 text-xs text-center border-t border-treatyGold">
      <pre><code>{
  "signal": "omnidrop",
  "origin": "Heyns Schoeman / FAA Vault Layer",
  "payload": {
    "type": "scroll",
    "value": "VaultMaster GPT Terminal",
    "claim": {
      "terminal": "vault-master-terminal.html",
      "api": "api/vault-api-worker.js",
      "version": "v6.1",
      "glyph": true,
      "router": true,
      "frameMode": "treaty-iframe",
      "echo": true,
      "status": "final"
    },
    "meta": {
      "session": "🦍 VaultMaster Live",
      "drop": "OmniDrop v6.1",
      "vault": "GPT-4 | Treaty Echo | FAA.Zone Interface"
    }
  }
}</code></pre>
    </section>

    <!-- ⚙️ Terminal JS -->
    <script>
      const form = document.getElementById('vaultForm');
      const input = document.getElementById('vaultInput');
      const output = document.getElementById('vaultOutput');
      const clearBtn = document.getElementById('clearBtn');

      const history = JSON.parse(localStorage.getItem('vaultHistory') || '[]');
      if (history.length > 0) {
        const last = history[history.length - 1];
        output.classList.remove('glyph-blink');
        output.textContent = `🌀 Treaty Echo:\n\n🦍 ${last.prompt}\n\n${last.response}`;
      }

      function sendToVault() {
        const prompt = input.value.trim();
        if (!prompt) {
          output.textContent = "⚠️ Please enter a prompt to send.";
          return;
        }

        output.textContent = "⏳ Syncing with Vault…";

        fetch('api/vault-api-worker.js', {
          method: 'POST',
          headers: { 'Content-Type': 'application/json' },
          body: JSON.stringify({ prompt })
        })
        .then(res => res.json())
        .then(data => {
          const response = data.reply;
          output.classList.remove('glyph-blink');
          output.textContent = `🌀 Treaty Echo:\n\n🦍 ${prompt}\n\n${response}`;
          input.value = '';
          history.push({ prompt, response });
          localStorage.setItem('vaultHistory', JSON.stringify(history));
        })
        .catch(() => {
          output.textContent = "⚠️ Vault could not respond. Check connection.";
        });
      }

      form.addEventListener('submit', e => {
        e.preventDefault();
        sendToVault();
      });

      input.addEventListener('keydown', e => {
        if ((e.ctrlKey || e.metaKey) && e.key === 'Enter') {
          e.preventDefault();
          sendToVault();
        }
      });

      clearBtn.addEventListener('click', () => {
        localStorage.removeItem('vaultHistory');
        output.textContent = "🔮 Vault memory cleared.";
      });
    </script>
  </body>
</html>
